# OSI 7계층, TCP/IP 5계층

OSI 7계층은 네트워크 통신이 일어나는 과정을 7단계로 나눈 표준 모델이다.

### 7. 애플리케이션 계층

사용자의 데이터와 직접 상호작용하는 유일한 계층으로 소프트웨어가 사용자에게 더 의미있는 데이터를 제공하기 위해 의존하는 프로토콜과 데이터를 조작하는 역할을 수행한다. (HTTP, SMTP)

### 6. 프레젠테이션 계층

애플리케이션 계층이 사용할 수 있도록 데이터를 준비하는 계층으로 데이터의 변환, 암호화, 압축을 담당한다.

### 5. 세션 계층

두 기기 사이의 세션 수립 및 종료를 담당한다. 데이터 전송 시 연결이 끊어진 경우 체크포인트를 이용해 세션 재개 시점을 알 수 있어 데이터 전체를 재전송할 필요없다.

### 4. 전송 계층

서로 다른 네트워트 간 두 기기 간의 통신, 흐름 제어 및 오류 제어를 담당한다. 데이터를 `세그먼트`라는 단위로 분할하며, 데이터 전송 속도 조절, 데이터 전송에 오류가 있는 경우 재전송을 요청한다.

### 3. 네트워크 계층

서로 다른 두 네트워크 간 데이터 전송을 용이하게 한다. `세그먼트`를 `패킷`으로 분할하며, 라우팅을 수행한다. 서로 통신하는 두 장치가 동일한 네트워크에 있는 경우 해당 계층은 필요없다.

### 2. 데이터 링크 계층

서로 동인한 네트워크 간 데이터 전송을 용이하게 한다. `패킷`을 `프레임`으로 분할하며, 흐름 제어 및 오류 제어를 담당한다.

### 1. 물리 계층

데이터가 비트스트림으로 변환되는 계층이며, 케이블과 스위치 등의 물리적 장비가 포함된다.

TCP/IP 5계층 or 4계층은 OSI 7계층 이전부터 사용하던 모델로 OSI 7계층의 상위 레이어와 하위 레이어가 통합된 더 간단한 형태이다. 5계층은 애플리케이션, 프레젠테이션, 세션 계층을 애플리케이션 계층으로 합친 경우이고 4계층은 데이터 링크 계층과 물리 계층을 합친 경우이다.

[참고자료](https://www.cloudflare.com/ko-kr/learning/ddos/glossary/open-systems-interconnection-model-osi/)

***

# 3way-handshake

- 클라이언트가 SYN 패킷을 서버로 전송
- SYN 패킷을 받은 서버는 ACK와 SYN flag가 설정된 패킷을 클라이언트로 전송
- 클라이언트가 ACK 패킷을 서버로 전송

***

# 4way-handshake

- 클라이언트가 FIN(ACK 포함됨) 패킷을 서버로 전송
- FIN 패킷을 받은 서버는 ACK 패킷을 클라이언트로 전송
- 보낼 패킷을 남은 경우를 대비해 일정 시간(240초) 후 FIN 패킷을 클라이언트로 전송
- 클라이언트가 ACK 패킷을 서버로 전송

***

# 클라이언트와 서버의 통신 과정

- 클라이언트가 브라우저에 URL을 입력한다.
- 브라우저는 DNS 서버에서 URL의 도메인과 연관된 IP 주소를 가져온다.
- 데이터 전송 전 서버의 상태를 확인하기 위해 3way-handshaking을 선행하여 세션을 수립한다.
- 세션이 수립되면 데이터 전송을 진행하며 데이터는 계층을 지나며 세그먼트 -> 패킷 -> 프레임으로 분할 후 전송된다.
- IP 주소를 이용해 라우팅 후 라우터를 따라 데이터를 목적지로 전송한다.
- 서버에 도착한 데이터는 계층을 거치며 역순으로 재조립된다.
- 요청에 맞는 응답을 클라이언트로 전송한다.
- 이전과 같은 방식으로 데이터는 분할 후 클라이언트에서 재조립된다.
- 받은 데이터를 브라우저가 화면에 랜더링한다.
- 통신이 끝난 경우 4way-handshaking을 통해 세션을 종료한다.

***

# IP

Internet Protocol의 약자로, 네트워크에 연결된 기기 구분 및 기기가 속한 네트워크를 찾기 위한 지표로써 사용된다.

***

# TCP와 UDP

TCP는 Transmission Control Protocol의 약자이며, 패킷을 추적 및 관리한다. 특징은 다음과 같다.

- 연결 지향 방식
- 3-way handshaking과정을 통해 연결을 설정, 4-way handshaking을 통해 해제
- 흐름 제어 및 오류 제어
- 높은 신뢰성을 보장
- UDP보다 속도가 느림
- 전이중(Full-Duplex), 점대점(Point to Point) 방식

UDP는 User Datagram Protocol의 약자이며, 데이터를 데이터그램 단위로 처리하는 프로토콜이다. 특징은 다음과 같다.

- 비연결형 서비스로 데이터그램 방식을 제공
- 정보를 주고 받을 때 정보를 보내거나 받는다는 신호절차를 거치지 않음
- UDP헤더의 CheckSum 필드를 통해 최소한의 오류만 검출
- 신뢰성이 낮음
- TCP보다 속도가 빠름

***

# http와 https

`HTTP`는 `Hypertext Transfer Protocol`의 약자이며 `HTTPS`는 `Hypertext Transfer Protocol Secure`의 약자이다.

두 프로토콜 모두 브라우저와 웹 서버가 HTTP 요청과 HTTP 응답으로 데이터를 전송한다.

차이점은 다음과 같다.

HTTP의 기본 포트는 80이며, HTTP 요청이나 응답이 탈취되면 데이터가 그대로 드러나게 된다. HTTPS의 기본 포트는 443이며, HTTP 요청이나 응답을 암호화하기 때문에 보안성이 높다. 이에 따라 HTTP 보다 신뢰성이 높아 검색 엔진에서 우위를 점하며, 애플리케이션 로드 속도가 더 빠르다.

***

# URL

Uniform Resource Locator의 약자로 인터넷에서 리소스의 위치를 가리키는 문자열이다. `스키마`, `도메인 네임`, `포트`, `패쓰`, `파라미터`, `앵커`로 이우러어져 있다.