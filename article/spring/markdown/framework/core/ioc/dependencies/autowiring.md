# Autowiring 공동작업자 [#](https://docs.spring.io/spring-framework/reference/core/beans/dependencies/factory-autowire.html)

스프링 컨테이너는 공동 작업하는 빈 사이의 관계를 자동으로 연결할 수 있다. 스프링이 `ApplicationContext`의 내용물을 검사하여 빈에 대한 공동작업자(다른 빈)를 자동으로 해결하도록 할 수 있다. Autowiring에는 다음과 같은 이점이 있다:

- Autowiring은 속성이나 생성자 인수를 지정할 필요성을 상당히 줄일 수 있다. ([이 장에서 설명](https://docs.spring.io/spring-framework/reference/core/beans/child-bean-definitions.html)하는 빈 템플릿과 같은 다른 메커니즘도 이 점에서 유용하다.)
- Autowiring은 개체의 진화에 따라 구성을 업데이트할 수 있다. 예를 들어, 클래스에 의존성을 추가해야 하는 경우 구성을 수정할 필요 없이 해당 의존성을 자동으로 충족할 수 있다. 따라서 autowiring은 코드 기반이 더 안정적이 될 때 명시적 와이어링으로 전환하는 옵션을 무시하지 않고 개발 중에 특히 유용할 수 있다.

XML 기반 구성 메타데이터를 사용하는 경우(의존성 주입 참조) `<bean/>` 요소의 `autowire` 특성을 사용하여 빈 정의에 대한 `autowire` 모드를 지정할 수 있다. Autowiring 기능에는 네 가지 모드가 있다. 빈당 `autowiring`을 지정하여 `autowire`할 항목을 선택할 수 있다. 다음 표에서는 네 가지 `autowiring` 모드에 대해 설명한다:

| Mode          | Explanation                                                                                                                                                                                           |
|---------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `no`          | (기본값) `autowiring` 없음. 빈 참조는 `ref` 요소로 정의해야 한다. 공동작업자를 지정하면 제어 능력과 명확성이 향상되므로 대규모 배포에서는 기본 설정을 변경하지 않는 것이 좋다. 시스템의 구조를 어느 정도 문서화한다.                                                                   |
| `byName`      | 속성 이름으로 `Autowiring`. 스프링은 `autowired` 되어야 하는 속성과 같은 이름의 빈을 찾는다. 예를 들어, 빈 정의가 이름으로 `autowire`로 설정되어 있고 `master` 속성이 포함되어 있는 경우(즉, `setMaster(..)` 메서드가 있음) 스프링은 `master`라는 빈 정의를 찾고 이를 사용하여 속성을 설정한다. |
| `byType`      | 컨테이너에 속성 유형의 빈이 하나만 있는 경우 속성을 `autowired`로 지정한다. 둘 이상이 있으면 치명적인 예외가 발생하며, 이는 해당 빈에 `byType` `autowiring`를 사용할 수 없음을 나타낸다. 일치하는 빈이 없으면 아무 일도 일어나지 않는다(속성이 설정되지 않음).                                    |
| `constructor` | `byType`과 유사하지만 생성자 인수에 적용된다. 컨테이너에 생성자 인수 유형의 빈이 정확히 하나도 없으면 치명적인 오류가 발생한다.                                                                                                                          |

`byType` 또는 `constructor` `autowiring` 모드를 사용하면 어레이와 유형 컬렉션을 연결할 수 있다. 이러한 경우, 컨테이너 내에서 예상되는 유형과 일치하는 모든 `autowire` 후보가 의존성을 충족하기 위해 제공된다. 필요한 키 유형이 `String`인 경우 강력하게 할당된 `Map` 인스턴스를 `autowire`할 수 있다. `autowired` `Map` 인스턴스의 값은 예상 유형과 일치하는 모든 빈 인스턴스로 구성되며 `Map` 인스턴스의 키에는 해당하는 빈 이름이 포함된다.

# Autowiring의 제한 사항 및 단점

`Autowiring`은 프로젝트 전체에서 일관되게 사용될 때 가장 잘 작동한다. `autowiring`가 일반적으로 사용되지 않는 경우 개발자가 하나 또는 두 개의 빈 정의만 연결하는 데 사용하는 것이 혼란스러울 수 있다.

`autowiring`의 제한 사항과 단점을 고려해 보자:

- `property` 및 `constructor-arg` 설정의 명시적 의존성은 항상 자동 배선을 재정의한다. 원시, `Strings` 및 `Classes`와 같은 단순 속성 및 이러한 단순 속성의 배열은 `autowiring`할 수 없다. 이 제한 사항은 설계에 따라 결정된다.
- `Autowiring`은 명시적 와이어링보다 정확하지 않다. 앞의 표에서 언급한 바와 같이, 스프링은 예상치 못한 결과를 초래할 수 있는 모호성의 경우 추측을 피하는 데 주의를 기울인다. 스프링 관리 개체 간의 관계는 더 이상 명시적으로 문서화되지 않는다.
- 스프링 컨테이너에서 설명서를 생성할 수 있는 툴에서는 와이어링 정보를 사용할 수 없다.
- 컨테이너 내의 여러 빈 정의가 `setter` 메서드 또는 생성자 인수로 지정된 유형과 일치하여 `autowired`일 수 있다. 어레이, 컬렉션 또는 `Map` 인스턴스의 경우 반드시 문제가 되는 것은 아니다. 그러나 단일 값을 기대하는 의존성의 경우 이러한 모호성이 임의로 해결되지 않는다. 고유한 빈 정의를 사용할 수 없는 경우 예외가 발생한다.

후자의 시나리오에서는 다음과 같은 몇 가지 옵션이 있다:

- 명시적 와이어링을 위해 `autowiring`를 포기한다.
- 다음 절에 설명된 대로 `autowire-candidate` 특성을 `false`로 설정하여 빈 정의에 대한 `autowiring`을 방지한다.
- `<bean/>` 요소의 주 특성을 `true`로 설정하여 단일 빈 정의를 `primary` 후보로 지정한다.
- [주석 기반 컨테이너 구성](https://docs.spring.io/spring-framework/reference/core/beans/annotation-config.html)에 설명된 대로 주석 기반 구성에서 사용할 수 있는 보다 세밀한 컨트롤을 구현한다.

# Autowiring에서 빈 제외

빈 단위로 `autowiring`에서 빈을 제외할 수 있다. 스프링의 XML 형식에서 `<bean/>` 요소의 `autowire-candidate` 특성을 `false`로 설정한다. 컨테이너는 `autowiring` 인프라(예: `@Autowired`)에서 특정 빈 정의를 사용할 수 없도록 한다.

> `autowire-candidate` 특성은 유형 기반 `autowiring`에만 영향을 미치도록 설계되었다. 지정된 빈이 `autowire` 후보로 표시되지 않은 경우에도 확인되는 이름별 명시적 참조에는 영향을 주지 않는다. 결과적으로, 이름을 가진 `autowiring`은 이름이 일치하면 빈을 주입한다.

빈 이름에 대한 패턴 정렬을 기준으로 `autowire` 후보를 제한할 수도 있다. 최상위 `<beans/>` 요소는 `default-autowire-candidates` 특성 내에서 하나 이상의 패턴을 허용한다. 예를 들어 `autowire` 후보 상태를 이름이 `Repository`로 끝나는 빈으로 제한하려면 `*Repository` 값을 지정한다. 여러 패턴을 제공하려면 쉼표로 구분된 목록에서 패턴을 정의한다. 빈 정의의 `autowire-candidate` 특성에 대한 `true` 또는 `false`의 명시적 값이 항상 우선한다. 이러한 빈에는 패턴 매칭 규칙이 적용되지 않는다.

이러한 기술은 `autowiring`에 의해 다른 빈에 절대 주입되고 싶지 않은 빈에 유용하다. 그렇다고 해서 제외된 빈 자체를 `autowiring`를 사용하여 구성할 수는 없다. 오히려, 빈 자체는 다른 빈을 `autowiring`할 후보가 아니다.